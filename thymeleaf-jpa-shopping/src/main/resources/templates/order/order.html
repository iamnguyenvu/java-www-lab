<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Chi ti·∫øt ƒë∆°n h√†ng</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<div th:replace="~{fragments/navbar :: navbar}"></div>

<div class="page-container">

    <div th:if="${order != null}">
        <div class="page-header">
            <div>
                <p class="page-subtitle" style="margin:0;">M√£ ƒë∆°n h√†ng #<span th:text="${order.orderId}"></span></p>
                <h1 class="page-title">Chi ti·∫øt ƒë∆°n h√†ng</h1>
                <p class="page-subtitle">
                    ƒê·∫∑t l√∫c <span th:text="${#calendars.format(order.orderDate, 'dd/MM/yyyy HH:mm')}"></span>
                </p>
            </div>
            <div class="page-actions">
                <a th:href="@{/orders}" class="btn btn-ghost">‚Üê V·ªÅ danh s√°ch ƒë∆°n</a>
            </div>
        </div>

        <section class="page-section">
            <div class="detail-grid">
                <div>
                    <h3 style="margin-top:0;">Th√¥ng tin kh√°ch h√†ng</h3>
                    <ul class="detail-list">
                        <li class="detail-item">
                            <span class="detail-item__label">Kh√°ch h√†ng</span>
                            <span class="detail-item__value" th:text="${order.customerName}"></span>
                        </li>
                        <li class="detail-item">
                            <span class="detail-item__label">Kh√°ch t·ª´</span>
                            <span class="detail-item__value" th:text="${#calendars.format(order.customerSince, 'dd/MM/yyyy')}"></span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 style="margin-top:0;">Th√¥ng tin ƒë∆°n h√†ng</h3>
                    <ul class="detail-list">
                        <li class="detail-item">
                            <span class="detail-item__label">S·ªë s·∫£n ph·∫©m</span>
                            <span class="detail-item__value">
                                <span class="badge badge-info" th:text="${order.orderLineCount} + ' s·∫£n ph·∫©m'"></span>
                            </span>
                        </li>
                        <li class="detail-item">
                            <span class="detail-item__label">T·ªïng ti·ªÅn</span>
                            <span class="detail-item__value price-display"
                                  th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="page-section" th:if="${order.orderLines != null && !#lists.isEmpty(order.orderLines)}">
            <h3 style="margin-top:0;">Chi ti·∫øt s·∫£n ph·∫©m</h3>
            <div class="table-scroll" style="margin-top:var(--space-4);">
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>S·∫£n ph·∫©m</th>
                            <th>ƒê∆°n gi√°</th>
                            <th>S·ªë l∆∞·ª£ng</th>
                            <th>Th√†nh ti·ªÅn</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="line, stat : ${order.orderLines}">
                            <td th:text="${stat.count}"></td>
                            <td>
                                <a th:href="@{/products/{id}(id=${line.productId})}" th:text="${line.productName}"></a>
                            </td>
                            <td th:text="${#numbers.formatDecimal(line.unitPrice, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></td>
                            <td th:text="${line.quantity}"></td>
                            <td th:text="${#numbers.formatDecimal(line.subtotal, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="4" style="text-align:right;">T·ªïng c·ªông</td>
                            <td th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </section>
    </div>

    <div th:if="${order == null}" class="empty-state">
        <div style="font-size:60px; margin-bottom:var(--space-4);">üîç</div>
        <h3>Kh√¥ng t√¨m th·∫•y ƒë∆°n h√†ng</h3>
        <p>ƒê∆°n h√†ng c√≥ th·ªÉ ƒë√£ b·ªã x√≥a ho·∫∑c b·∫°n kh√¥ng ƒë·ªß quy·ªÅn xem.</p>
        <a th:href="@{/orders}" class="btn btn-ghost" style="margin-top:var(--space-4);">‚Üê Quay l·∫°i danh s√°ch</a>
    </div>

</div>

<!-- Include Chatbot -->
<div th:replace="~{fragments/chatbot :: chatbot}"></div>

</body>
</html>
